; Polybar configuration (replaces i3blocks)
; Installed to: ~/.config/polybar/config.ini

[colors]
background = #1a1d23
foreground = #ffffff
separator  = #2a2e38
accent     = #7c3aed
urgent     = #ef4444
muted      = #888888
indicator  = #a855f7

[bar/main]
width = 100%
height = 32
bottom = true
line-size = 32
padding-top = 0
padding-bottom = 0
background = ${colors.background}
foreground = ${colors.foreground}

; Helps Polybar stack/reflow correctly with i3
wm-restack = i3
override-redirect = false

; Text font (size 11) and Icon font (size 15 for visibility) - adjusted baseline for perfect alignment
font-0 = "JetBrainsMono Nerd Font Mono:size=11;4"
font-1 = "JetBrainsMono Nerd Font Mono:size=15;4"
font-2 = "JetBrainsMono Nerd Font Mono:size=15;4"


modules-left = i3
modules-right = cpu_temp sep volume sep battery sep time sep date sep_tray

tray-position = right
tray-padding = 6
tray-maxsize = 18
tray-detached = false
tray-background = ${colors.background}
tray-offset-x = 0
tray-offset-y = 0

; Consistent module spacing
padding-right = 1
module-margin-right = 0

enable-ipc = true

[module/i3]
type = internal/i3
strip-wsnumbers = true
index-sort = true
wrapping-scroll = false
pin-workspaces = false

; Show workspace number (normal size) and icon - compact with centered numbers
label-focused = " %index% "
label-focused-background = ${colors.accent}
label-focused-foreground = ${colors.foreground}
label-focused-padding = 0
label-focused-minlen = 3

label-unfocused = " %index% "
label-unfocused-foreground = ${colors.muted}
label-unfocused-padding = 0
label-unfocused-minlen = 3

label-visible = " %index% "
label-visible-foreground = ${colors.foreground}
label-visible-padding = 0
label-visible-minlen = 3

label-urgent = " %index% "
label-urgent-background = ${colors.urgent}
label-urgent-foreground = ${colors.foreground}
label-urgent-padding = 0
label-urgent-minlen = 3

[module/sep]
type = custom/text
content = " %{T1}│%{T-} "
content-foreground = ${colors.separator}

[module/sep_tray]
type = custom/text
content = " %{T1}│%{T-} "
content-foreground = ${colors.separator}

[module/cpu_temp]
type = custom/script
exec = ~/.config/i3/scripts/temperature
interval = 5
format-prefix = "%{T1}󰔏 %{T-}"
format-prefix-foreground = ${colors.foreground}
label = %output%
label-padding = 0

[module/volume]
type = custom/script
exec = ~/.config/i3/scripts/volume-click
interval = 2
format-prefix = "%{T2}󰕾 %{T-}"
format-prefix-foreground = ${colors.foreground}
label = %output%
label-padding = 0
click-left = pavucontrol
click-right = pavucontrol

[module/battery]
type = custom/script
exec = ~/.config/i3/scripts/battery
interval = 5
label = %output%
label-padding = 0

[module/date]
type = custom/script
exec = date '+%a %d %b'
interval = 60
format-prefix = "%{T2}󰃭 %{T-}"
format-prefix-foreground = ${colors.foreground}
label = %output%
label-padding = 0

[module/time]
type = custom/script
exec = LC_TIME=en_US.UTF-8 date '+%-I:%M %p'
interval = 1
format-prefix = "%{T2} %{T-}"
format-prefix-foreground = ${colors.foreground}
label = %output%
label-padding = 0

; Secondary bar for non-primary monitors (no system tray)
[bar/secondary]
width = 100%
height = 32
bottom = true
line-size = 32
padding-top = 0
padding-bottom = 0
background = ${colors.background}
foreground = ${colors.foreground}

wm-restack = i3
override-redirect = false

font-0 = "JetBrainsMono Nerd Font Mono:size=11;4"
font-1 = "JetBrainsMono Nerd Font Mono:size=15;4"
font-2 = "JetBrainsMono Nerd Font Mono:size=15;4"

modules-left = i3
modules-right = cpu_temp sep volume sep battery sep time sep date

; NO tray on secondary monitors
tray-position = none

padding-right = 1
module-margin-right = 0

enable-ipc = true
